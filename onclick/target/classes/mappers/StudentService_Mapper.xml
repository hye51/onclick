<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.onclick.app.persistence.StudentService_Mapper">

<select id="studentIdChcek" parameterType="Integer" resultType="Integer">
SELECT count(*) as cnt 
FROM  onclick_student  
WHERE sdelYn='N'
AND sidx=#{sidx}
</select>

<update id="studentJoin" parameterType="HashMap">
UPDATE onclick_student
SET sname=#{sname},spwd=#{spwd},semail=#{semail},sphone=#{sphone}
WHERE sidx=#{sidx}
</update>

<select id="studentLogin" parameterType="HashMap" resultType="sv">
SELECT * 
FROM onclick_student 
WHERE sdelyn='N' 
AND sidx=#{id} 
AND spwd=#{pwd}
</select>

<select id="stuLecSelectAll" parameterType="int" resultType="ed">
SELECT a.eidx, a.sidx, a.lidx, b.lname
FROM onclick_enroll a
INNER JOIN onclick_prolec b
ON a.lidx = b.lidx
WHERE a.sidx=#{id}
</select>

<select id="studentPwdCheck"  parameterType="HashMap" resultType="Integer">
SELECT count(*) as cnt
FROM onclick_student 
WHERE sdelyn='N' 
AND spwd=#{spwd}
</select>
	
<select id="studentSelectOne"  parameterType="Integer" resultType="sv">
SELECT *
FROM onclick_student 
WHERE sdelyn='N' 
AND sidx=#{sidx}
</select>	

<select id="stuTaskSelectAll" parameterType="int" resultType="HashMap">
select a.eidx, a.sidx, a.lidx, b.tuname
from onclick_enroll a
inner join onclick_taskupload b
on a.lidx = b.lidx
where a.sidx=#{id}
</select>

<select id="stuTaskContent" parameterType="String" resultType="tv">
select *
from onclick_taskupload
where tedelyn='n'
and tuname=#{tuname}
order by tudate desc
limit 5
</select>
	
</mapper>